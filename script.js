// ุชุฃุซูุฑ ุงููุชุงุจุฉ ุงูุชููุงุฆูุฉ
function typeWriter() {
    const texts = [
        "I'm an Electronic Engineer",
        "I'm a Programmer & Developer",
        "I'm a Video Editor",
        "I'm a Creative Designer"
    ];

    const typingText = document.getElementById('typing-text');
    const cursor = document.querySelector('.typing-cursor');

    // ุฅุนุฏุงุฏ ุงูููู ุงูุฃูููุฉ
    let textIndex = 0;
    let charIndex = 0;
    let isDeleting = false;
    let isPaused = false;

    // ุถุจุท ุงูุณุฑุนุงุช
    const typingSpeed = 100;
    const deletingSpeed = 50;
    const pauseBetweenTexts = 2000;
    const pauseBeforeStart = 1000;

    function type() {
        // ุฅุฐุง ูุงู ุงููุคุดุฑ ูุฎูููุง (ุฃุซูุงุก ุงูุฅูุชุธุงุฑ ุจูู ุงููุตูุต)
        if (isPaused) {
            cursor.style.visibility = 'hidden';
            return;
        }

        cursor.style.visibility = 'visible';
        const currentText = texts[textIndex];

        if (isDeleting) {
            // ุญุงูุฉ ุงููุณุญ
            typingText.textContent = currentText.substring(0, charIndex - 1);
            charIndex--;
        } else {
            // ุญุงูุฉ ุงููุชุงุจุฉ
            typingText.textContent = currentText.substring(0, charIndex + 1);
            charIndex++;
        }

        if (!isDeleting && charIndex === currentText.length) {
            // ููุงูุฉ ุงููุชุงุจุฉุ ุงูุชุธุฑ ุซู ุงุจุฏุฃ ุงููุณุญ
            isDeleting = true;
            isPaused = true;
            setTimeout(() => {
                isPaused = false;
                type();
            }, pauseBetweenTexts);
        } else if (isDeleting && charIndex === 0) {
            // ููุงูุฉ ุงููุณุญุ ุงูุชูู ูููุต ุงูุชุงูู
            isDeleting = false;
            textIndex = (textIndex + 1) % texts.length;
            isPaused = true;
            setTimeout(() => {
                isPaused = false;
                type();
            }, 500);
        } else {
            // ุงุณุชูุฑ ูู ุงููุชุงุจุฉ ุฃู ุงููุณุญ
            const speed = isDeleting ? deletingSpeed : typingSpeed;
            setTimeout(type, speed);
        }
    }

    // ุจุฏุก ุงูุชุฃุซูุฑ ุจุนุฏ ุชุฃุฎูุฑ ูุตูุฑ
    setTimeout(type, pauseBeforeStart);
}
// ุงุณุชุฏุนุงุก ุงูุฏุงูุฉ ุนูุฏ ุชุญููู ุงูุตูุญุฉ
document.addEventListener('DOMContentLoaded', () => {
    createBubbles();
    typeWriter(); // ุฃุถู ูุฐุง ุงูุณุทุฑ
});

// ุจูุงูุงุช ุงููุดุงุฑูุน
const projectsData = {
    programs: [
        {
            title: "ููุณูุนุฉ ุงููุณูู",
            description: "ุชุทุจูู ุฅุณูุงูู ูุนูู ุนูู ูุธุงู ุงูุชุดุบูู ูููุฏูุฒ ุณูู ุงูุฅุณุชุฎุฏุงู ู ุฌุงูุน ูููุซูุฑ ูู ุงูููุฒุงุช",
            image: "img/my-programs/muslim.png",
            url: "https://m5rdev.github.io/MuslimEncyclopedia/",
            keywords: "ุจุฑูุงูุฌ ุฅุณูุงูู ููุณูุนุฉ ุงููุณูู ูููุฏูุฒ ูุฑุขู ุฃุฐูุงุฑ",
        },
        {
            title: "ุฃุฏุงุฉ ุชุญููู ุงููุฑุงุก",
            description: "ุฃุฏุงุฉ ูุชุญููู ูุฌููุนุฉ ูู ุงููุฑุงุก ุฃุฏุงุฉ ูุฏูุฌุฉ ูุน ุชุทุจูู ููุณูุนุฉ ุงููุณูู ู ูููู ุชุญููููุง ุจููุฑุฏูุง",
            image: "img/my-programs/Radio.png",
            url: "https://drive.usercontent.google.com/download?id=1EweoMp-fCEIGjMATIRmRfQDrJuvDLkB1&export=download&authuser=0&confirm=t&uuid=799940cf-5b96-4964-ab03-f2a498696ebc&at=APvzH3pqvO-PCmbQ07KCCpMXKSWr%3A1735507851879",
            keywords: "ุฃุฏุงุฉ ุชุญููู ูุฑุงุก ูุฑุขู ุฅุณูุงูู"
        },
        {
            title: "ูุณุจุญุฉ ุงููุชุฑูููุฉ ๐ฟ",
            description: "ุชุทุจูู ููุฃูุฏุฑููุฏ ููุณุงุนุฏุชู ูู ุนุฏุฏ ุฑูู ุงูุฃุฐูุงุฑ ูุงูุชุณุงุจูุญ",
            image: "img/my-programs/Sib7a.png",
            url: "https://www.mediafire.com/file/jp8zvk8xpkd8rxc/%25D9%2585%25D8%25B3%25D8%25A8%25D8%25AD%25D8%25A9_%25D8%25A7%25D9%2584%25D9%2583%25D8%25AA%25D8%25B1%25D9%2588%25D9%2586%25D9%258A%25D8%25A9.apk/file",
            keywords: "ูุณุจุญุฉ ุฃุฐูุงุฑ ุชุณุจูุญ ุฃูุฏุฑููุฏ"
        },
        {
            title: "ุญุงุณุจุฉ ููุงููุช ุงูููู",
            description: "ุชุทุจูู ููููุจููุชุฑ ููุณุงุนุฏุชู ูู ุชุญุฏูุฏ ููุงุนูุฏ ุงูุงุณุชููุงุธ ุจูุงุก ุนูู ุฏูุฑุงุช ุงูููู",
            image: "img/my-programs/sleepcalc.png",
            url: "https://www.mediafire.com/file/k8qruo8k8zdp8p9/Sleep_Calculator.exe/file",
            keywords: "ุญุงุณุจุฉ ุงูููู ุฏูุฑุงุช ููู"
        },
        {
            title: "ูุชุฑุฌู ูุตูุต",
            description: "ุชุทุจูู ููููุจููุชุฑ ุชุฑุฌูุฉ ูุบุงุช ูุชุนุฏุฏ ุฎููู ู ูุชุนุฑู ุนูู ุงููุบุงุช ุชููุงุฆู ุงุฐุง ูู ุชุญุฏุฏ ูุบุฉ",
            image: "img/my-programs/TranslateText.png",
            url: "https://www.mediafire.com/file/fq6hpdnrf9scnlb/TranslateText.exe/file",
            keywords: "ูุชุฑุฌู ูุตูุต ูุบุงุช ุชุฑุฌูุฉ",
        },
        {
            title: "ุขูุฉ ุญุงุณุจุฉ ููุงูุฏุฑููุฏ",
            description: "ุชุทุจูู ุขูุฉ ุญุงุณุจุฉ ุจุณูุทุฉ ููุฃูุฏุฑููุฏ ุจูุบุฉ ููุชุฑ",
            image: "img/source-code/calculator.png",
            url: "https://www.mediafire.com/file/f7tk2t1muxltdws/%255BFlutter%255DCalcutator.apk/file",
            keywords: "ุขูุฉ ุญุงุณุจุฉ ุงูุฏุฑููุฏ ููุงุชุฑ",
        },
        {
            title: "ุชููู ุงูุตูุฑ [ุชุฑุชูุจ ุงูุตูุฑ]",
            description: "ุชููู ุงู ุชุฑุชูุจ ุงูุตูุฑ ุจุงูุงูุถู rate pic",
            image: "img/my-programs/pic-rate.png",
            url: "https://www.mediafire.com/file/c361bn2kd0nooyf/Pic_Rate.rar/file",
            keywords: "ุชููู ุงูุตูุฑ ู ุชุฑุชูุจ ุงูุตูุฑ",
        }
    ],
    games: [
        {
            title: "Flipy Robot",
            description: "ุฃูู ูุนุจุฉ ููุง ูู ูุญุฑู ุฌูุฏูุช",
            image: "img/my-games/Flipy Robot.png",
            url: "https://m5rdev.itch.io/flipy-robot",
            keywords: "ุฑูุจูุช ูููุจู ูุนุจุฉ ุฌูุฏูุช",
        },
        {
            title: "ูุฑูุฉ ุญุฌุฑ ููุต",
            description: "ูุนุจุฉ ุชุฌุฑูุจุฉ ุจุฏูู ูุญุงูู [ูููุฏูุฒ ููุฑู ุจูุบุฉ ุณู ุดุงุฑุจ]",
            image: "img/my-games/rock paper scissors .png",
            url: "https://m5rdev.itch.io/rock-paper-scissors",
            keywords: "ูุนุจุฉ ุญุฌุฑ ูุฑูุฉ ููุต",
        },
        {
            title: "luminaze-demo",
            description: "ูุนุจุฉ ุชุญุงูู ูููุง ุงูุง ุชูุน ูู ุงู ูุฎ ุญุชู ุชุตู ุงูู ููุทุฉ ุงูููุงูุฉ (ูุนุจุฉ ุตุนุจู)",
            image: "img/my-games/luminaze-demo.png",
            url: "https://m5rdev.itch.io/luminaze-demo",
            keywords: "ูุนุจุฉ luminaze ูุฎุงุฎ"
        }
    ],  
    websites: [
        {
            title: "MuslimEncyclopedia-online",
            description: "ูููุน ููุณูุนุฉ ุงููุณูู ุงูุฅููุชุฑูููุฉ - ูุณุฎุฉ ุงูููุจ",
            image: "img/my-programs/muslim.png",
            url: "https://m5rdev.github.io/MuslimEncyclopedia-online/",
            keywords: "ูููุน ุฅุณูุงูู ููุณูุนุฉ ุงููุณูู ููุจ ูุฑุขู ุฃุฐูุงุฑ",
        },
        {
            title: "ColorMate",
            description: "ุฃุฏุงุฉ ูุงุฎุชูุงุฑ ูุชูุณูู ุงูุฃููุงู ูููุตูููู ูุงููุทูุฑูู",
            image: "img/my-websites/ColorMate-code.png",
            url: "https://m5rdev.github.io/ColorMate/",
            keywords: "ุฃููุงู ุชูุณูู ูุตูู ูุทูุฑ ููุจ"
        },
        {
            title: "VoiceToText-TextToVoice",
            description: "ุฃุฏุงุฉ ุชุญููู ุงูุตูุช ุฅูู ูุต ูุงููุต ุฅูู ุตูุช ูุจุงุดุฑุฉ ูู ุงููุชุตูุญ",
            image: "img/my-websites/text-to-voice-code.png",
            url: "https://m5rdev.github.io/VoiceToText-TextToVoice/",
            keywords: "ุตูุช ูุต ุชุญููู ููุจ"
        },
        {
            title: "Html-Code-viewer",
            description: "ูุญุฑุฑ ุฃููุงุฏ ุฃูููุงูู ููุนุงููุฉ ุฃููุงุฏ HTML, CSS, JavaScript",
            image: "img/my-websites/programming_icon.png",
            url: "https://m5rdev.github.io/Html-Code-viewer/",
            keywords: "ูุญุฑุฑ ุฃููุงุฏ ููุจ html css javascript",
        },
        {
            title: "ูุณุจุญุฉ ุงูููุงูู ๐ฟ",
            description: "ูุณุจุญุฉ ุงููุชุฑูููุฉ ุฃูููุงูู HTML, CSS, JavaScript",
            image: "img/my-programs/Sib7a.png",
            url: "https://m5rdev.github.io/ECounter/",
            keywords: "ูุญุฑุฑ ุฃููุงุฏ ููุจ html css javascript",
        },
        {
            title: "ุงููุฑุดุฏ ุงูุณูุงุญู ุงูุนุฑุจู",
            description: "ููุตุฉ ุนุฑุจูุฉ ุดุงููุฉ ุชุญุชูู ุนูู ูู ุงููุนูููุงุช ุงูุณูุงุญูุฉ ุนู ุงูุฏูู ุงูุนุฑุจูุฉ ู ุจุนุถ ุงููุนูููุงุช",
            image: "img/my-websites/tour guide.png",
            url: "https://m5rdev.github.io/ar-tour-guide/",
            keywords: "ุงููุฑุดุฏ ุงูุณูุงุญู ุงูุนุฑุจู : ููุตุฉ ุนุฑุจูุฉ ุดุงููุฉ ุชุญุชูู ุนูู ูู ุงููุนูููุงุช ุงูุณูุงุญูุฉ ุนู ุงูุฏูู ุงูุนุฑุจูุฉ ู ุชุญุฏูุซ ุฃุณุนุงุฑ ุงูุนููุงุช ูุจุงุดุฑุฉ ูู ูุตุงุฏุฑ ููุซููุฉ",
        }
    ],
    sourceCode: [
        {
            title: "ุณูุฑุณ Crazylogin",
            description: "ุณูุฑุณ ููุฏ ุจุฑูุงูุฌ login ู register ุจุณูุทุฉ ููุณููุฉ ุจูุบุฉ ุณู ุดุงุฑุจ ุจูุบุฉ ุณู ุดุงุฑุจ C#",
            image: "img/source-code/crazylogin-code.png",
            url: "https://drive.google.com/file/d/1pHAvSQ1Hqbw158_JBrGpMgGoRPH9B0Wl/view?usp=sharing",
            keywords: "ุณูุฑุณ ููุฏ CrazyLogin"
        },
        {
            title: "ุณูุฑุณ Flipy Robot",
            description: "ุณูุฑุณ ููุฏ ูุนุจุฉ Flipy Robot ุจูุบุฉ GDScript",
            image: "img/my-games/Flipy Robot.png",
            url: "https://github.com/m5rdev/Flipy-Robot",
            keywords: "ุณูุฑุณ ููุฏ ูุนุจุฉ ุฌูุฏูุช"
        },
        {
            title: "ุณูุฑุณ ุขูุฉ ุญุงุณุจุฉ",
            description: "ุณูุฑุณ ููุฏ ูุขูุฉ ุญุงุณุจุฉ ุจุณูุทุฉ ุจูุบุฉ ุงูุณู ุดุงุฑุจ C#",
            image: "img/source-code/calculator.png",
            url: "https://www.mediafire.com/file/od2fldnwsxmlsn8/Calculator.rar/file",
            keywords: "ุณูุฑุณ ููุฏ ุขูุฉ ุญุงุณุจุฉ"
        },
        {
            title: "ุณูุฑุณ ูุชุฑุฌู ูุตูุต",
            description: "ุณูุฑุณ ููุฏ ูุชุทุจูู ุชุฑุฌูุฉ ูุบุงุช ูุชุนุฏุฏ ููููุจููุชุฑ ุจูุบุฉ C# ุณู ุดุงุฑุจ ุฏูุช ูุช ูููุฏูุฒ ููุฑู",
            image: "img/my-programs/TranslateText.png",
            url: "https://www.mediafire.com/file/7klavtsdx52yagt/TranslateText.rar/file",
            keywords: "ุณูุฑุณ ููุฏ ูุชุฑุฌู ูุตูุต"
        },
        {
            title: "ุณูุฑุณ ุขูุฉ ุญุงุณุจุฉ ููุงูุฏุฑููุฏ",
            description: "ุณูุฑุณ ููุฏ ุชุทุจูู ุขูุฉ ุญุงุณุจุฉ ุจุณูุทุฉ ููุฃูุฏุฑููุฏ ุจูุบุฉ ููุชุฑ Flutter",
            image: "img/source-code/calculator.png",
            url: "https://www.mediafire.com/file/dca0vobk6lqgyra/Flutter+calculator.rar/file",
            keywords: "ุณูุฑุณ ููุฏ ุขูุฉ ุญุงุณุจุฉ ุงูุฏุฑููุฏ"
        },
        {
            title: "ูุญุฑุฑ ุฃููุงุฏ ุฃูููุงูู",
            description: "ุณูุฑุณ ููุฏ ูููุน ูุญุฑุฑ ุฃููุงุฏ ุฃูููุงูู ููุนุงููุฉ ุฃููุงุฏ html,css,js",
            image: "img/my-websites/programming_icon.png",
            url: "https://www.mediafire.com/file/gpnv19ebkzurr0z/Html-Code-viewer.zip/file",
            keywords: "ุณูุฑุณ ููุฏ ูุญุฑุฑ ุฃููุงุฏ"
        },
        {
            title: "ุณูุฑุณ ุงููุณุจุญุฉ ุงูุงูููุงูู ๐ฟ",
            description: "ุณูุฑุณ ููุฏ ูููุน ุงููุณุจุญุฉ ุงููุชุฑูููุฉ ุฃูููุงูู HTML, CSS, JavaScript",
            image: "img/my-programs/Sib7a.png",
            url: "https://www.mediafire.com/file/5lme3bqw4y130n4/%25D9%2585%25D8%25B3%25D8%25A8%25D8%25AD%25D8%25A9_%25D8%25A5%25D9%2584%25D9%2583%25D8%25AA%25D8%25B1%25D9%2588%25D9%2586%25D9%258A%25D8%25A9_%25D8%25A3%25D9%2588%25D9%2586%25D9%2584%25D8%25A7%25D9%258A%25D9%2586.zip/file",
            keywords: "ูุญุฑุฑ ุฃููุงุฏ ููุจ html css javascript",
        },
        ,
        {
            title: "ุณูุฑุณ ุงููุณุจุญุฉ ูุงูุฏุฑููุฏ ๐ฟ",
            description: "ุณูุฑุณ ููุฏ ุงููุณุจุญุฉ ุงููุชุฑูููุฉ ูุงูุฏุฑููุฏ ุจูุบุฉ ููุชุฑ Flutter",
            image: "img/my-programs/Sib7a.png",
            url: "https://drive.google.com/file/d/1ZCEH5PHUFox8IsZ-3VpXav0imMs7Rdo9/view?usp=drive_link",
            keywords: "ูุญุฑุฑ ุฃููุงุฏ ููุจ html css javascript",
        },
        {
            title: "ุณูุฑุณ ุชููู ุงูุตูุฑ",
            description: "ุณูุฑุณ ููุฏ ุชููู ุงู ุชุฑุชูุจ ุงูุตูุฑ ุจุงูุงูุถู ูุบุฉ C# rate pic",
            image: "img/my-programs/pic-rate.png",
            url: "https://www.mediafire.com/file/y765zxugz1uhd9q/RatePic+Source+code.rar/file",
            keywords: "ุชููู ุงูุตูุฑ ู ุชุฑุชูุจ ุงูุตูุฑ",
        },
        {
            title: "ุณูุฑุณ ุงููุฑุดุฏ ุงูุณูุงุญู",
            description: "ููุตุฉ ุนุฑุจูุฉ ุดุงููุฉ ุชุญุชูู ุนูู ูู ุงููุนูููุงุช ุงูุณูุงุญูุฉ ุนู ุงูุฏูู ุงูุนุฑุจูุฉ ู ุจุนุถ ุงููุนูููุงุช",
            image: "img/my-websites/tour guide.png",
            url: "https://www.mediafire.com/file/w0nk1euh8kgkymj/index.html/file",
            keywords: "ุงููุฑุดุฏ ุงูุณูุงุญู ุงูุนุฑุจู : ููุตุฉ ุนุฑุจูุฉ ุดุงููุฉ ุชุญุชูู ุนูู ูู ุงููุนูููุงุช ุงูุณูุงุญูุฉ ุนู ุงูุฏูู ุงูุนุฑุจูุฉ ู ุชุญุฏูุซ ุฃุณุนุงุฑ ุงูุนููุงุช ูุจุงุดุฑุฉ ูู ูุตุงุฏุฑ ููุซููุฉ",
        },
        {
            title: "ุณูุฑุณ ุงููููุน ุงูุญุงูู M5RDEV",
            description: "ูููุนู ุงูุฎุงุต Portfolio MRDEV ูุนูููุงุช ุนูู ู ุงุฎุฑ ูุดุงุฑูุนู ุงูุจุฑูุฌูุฉ",
            image: "img/avatar.png",
            url: "https://www.mediafire.com/file/w0nk1euh8kgkymj/index.html/file",
            keywords: "ูููุนู ุงูุฎุงุต Portfolio MRDEV ูุนูููุงุช ุนูู ู ุงุฎุฑ ูุดุงุฑูุนู ุงูุจุฑูุฌูุฉ",
        },
        {
            title: "ุณูุฑุณ ูููุน ููุณูุนุฉ ุงููุณูู",
            description: "ุชุทุจูู ุฅุณูุงูู ูุนูู ุนูู ูุธุงู ุงูุชุดุบูู ูููุฏูุฒ ุณูู ุงูุฅุณุชุฎุฏุงู ู ุฌุงูุน ูููุซูุฑ ูู ุงูููุฒุงุช",
            image: "img/my-programs/muslim.png",
            url: "https://www.mediafire.com/file/qzucwc0mh91lu0i/MuslimEncyclopedia-main.zip/file",
            keywords: "ุจุฑูุงูุฌ ุฅุณูุงูู ููุณูุนุฉ ุงููุณูู ูููุฏูุฒ ูุฑุขู ุฃุฐูุงุฑ",
        }
    ],
};

// ุนุฑุถ ุงููุดุงุฑูุน ุจุงุณุชุฎุฏุงู loops
function renderProjects() {
    // ุนุฑุถ ุงูุจุฑุงูุฌ
    const programsList = document.getElementById('programs-list');
    projectsData.programs.forEach(project => {
        programsList.innerHTML += `
            <li class="project-card animate_animated animate_fadeIn"
                data-keywords="${project.keywords}"
                onclick="openProjectModal(this)">
                <img src="${project.image}" alt="${project.title}" class="project-image">
                <h4 class="project-title">${project.title}</h4>
                <h6 class="project-description">${project.description}</h6>
                <div class="project-link" onclick="openProjectModal(this.parentElement, event)"
                    data-url="${project.url}" aria-label="ุชุญููู ${project.title}">
                    <i class="fa-solid fa-circle-down"></i>
                </div>
            </li>
        `;
    });

    // ุนุฑุถ ุงูุฃูุนุงุจ
    const gamesList = document.getElementById('games-list');
    projectsData.games.forEach(project => {
        gamesList.innerHTML += `
            <li class="project-card animate_animated animate_fadeIn"
                data-keywords="${project.keywords}"
                onclick="openProjectModal(this)">
                <img src="${project.image}" alt="${project.title}" class="project-image">
                <h4 class="project-title">${project.title}</h4>
                <h6 class="project-description">${project.description}</h6>
                <div class="project-link" onclick="openProjectModal(this.parentElement, event)"
                    data-url="${project.url}" aria-label="ุชุญููู ${project.title}">
                    <i class="fa-solid fa-circle-down"></i>
                </div>
            </li>
        `;
    });

    // ุนุฑุถ ุงูููุงูุน
    const websitesList = document.getElementById('websites-list');
    projectsData.websites.forEach(project => {
        websitesList.innerHTML += `
             <li class="project-card animate_animated animate_fadeIn"
                 data-keywords="${project.keywords}"
                 onclick="openProjectModal(this)">
                 <img src="${project.image}" alt="${project.title}" class="project-image">
                 <h4 class="project-title">${project.title}</h4>
                 <h6 class="project-description">${project.description}</h6>
                 <div class="project-link" onclick="openProjectModal(this.parentElement, event)"
                     data-url="${project.url}" aria-label="ุฒูุงุฑุฉ ${project.title}">
                     <i class="fa-solid fa-globe"></i>
                 </div>
             </li>
         `;
    });

    // ุนุฑุถ ุณูุฑุณ ููุฏ
    const sourceCodeList = document.getElementById('source-code-list');
    projectsData.sourceCode.forEach(project => {
        sourceCodeList.innerHTML += `
                <li class="project-card animate_animated animate_fadeIn"
                    data-keywords="${project.keywords}"
                    onclick="openProjectModal(this)">
                    <img src="${project.image}" alt="${project.title}" class="project-image">
                    <h4 class="project-title">${project.title}</h4>
                    <h6 class="project-description">${project.description}</h6>
                    <div class="project-link" onclick="openProjectModal(this.parentElement, event)"
                        data-url="${project.url}" aria-label="ุชุญููู ${project.title}">
                        <i class="fa-solid fa-circle-down"></i>
                    </div>
                </li>
            `;
    });
}

// Project Modal - ุงููุณุฎุฉ ุงููุนุฏูุฉ
function openProjectModal(element, event = null) {
    if (event) {
        event.preventDefault();
        event.stopPropagation();
    }

    // ุญูุธ ูููุน ุงูุชูุฑูุฑ ุงูุญุงูู
    const scrollY = window.scrollY || window.pageYOffset;
    document.body.style.top = `-${scrollY}px`;
    document.body.classList.add('modal-open');

    const modal = document.getElementById('projectModal');
    const modalImage = document.getElementById('modalImage');
    const modalTitle = document.getElementById('modalTitle');
    const modalDescription = document.getElementById('modalDescription');
    const modalDownloadLink = document.getElementById('modalDownloadLink');

    modalImage.src = element.querySelector('img').src;
    modalTitle.textContent = element.querySelector('h4').textContent;
    modalDescription.textContent = element.querySelector('h6').textContent;
    modalDownloadLink.href = element.querySelector('[data-url]').getAttribute('data-url');

    // ุชุญุฏูุฏ ูุต ุงูุฒุฑ ุจูุงุกู ุนูู ููุน ุงููุดุฑูุน
    const parentListId = element.closest('ul').id;
    if (parentListId === 'websites-list') {
        modalDownloadLink.textContent = 'ุชุตูุญ ุงููููุน';
    } else {
        modalDownloadLink.textContent = 'ุชุญููู';
    }

    modal.style.display = 'block';
}

function closeProjectModal() {
    const modal = document.getElementById('projectModal');
    modal.style.display = 'none';
}

// Loading Screen Animation
function updateProgress() {
    const loadingScreen = document.getElementById('loadingScreen');
    const percentageText = document.getElementById('percentage');
    const statusText = document.getElementById('status-text');
    let count = 0;
    const statusMessages = ["ูุทูุฑ ุงูุนุงุจ", "ูุจุฑูุฌ ููุงูุน", "ูุจุฑูุฌ ุชุทุจููุงุช", ""];

    const interval = setInterval(() => {
        count++;
        percentageText.textContent = count + '%';

        if (count === 30) statusText.textContent = statusMessages[0];
        if (count === 50) statusText.textContent = statusMessages[1];
        if (count === 70) statusText.textContent = statusMessages[2];

        if (count === 100) {
            statusText.textContent = statusMessages[3];
            clearInterval(interval);

            // Add fade out animation
            loadingScreen.style.opacity = '0';

            setTimeout(() => {
                loadingScreen.classList.add('hidden');
                renderProjects(); // ุนุฑุถ ุงููุดุงุฑูุน ุจุนุฏ ุงูุชูุงุก ุงูุชุญููู
            }, 500);
        }
    }, 20);
}

// Mobile Menu Toggle
const mobileMenuBtn = document.getElementById('mobileMenuBtn');
const navMenu = document.getElementById('navMenu');

mobileMenuBtn.addEventListener('click', () => {
    navMenu.classList.toggle('active');
});

// Close mobile menu when clicking on a link
document.querySelectorAll('.nav-link').forEach(link => {
    link.addEventListener('click', () => {
        navMenu.classList.remove('active');
    });
});

// Dark Mode Toggle
const themeToggle = document.getElementById('themeToggle');
const themeIcon = document.getElementById('themeIcon');

themeToggle.addEventListener('click', () => {
    document.body.classList.toggle('light-mode');

    if (document.body.classList.contains('light-mode')) {
        themeIcon.classList.remove('fa-sun');
        themeIcon.classList.add('fa-moon');
        localStorage.setItem('theme', 'light');
    } else {
        themeIcon.classList.remove('fa-moon');
        themeIcon.classList.add('fa-sun');
        localStorage.setItem('theme', 'dark');
    }
});

// Check for saved theme preference
if (localStorage.getItem('theme') === 'light') {
    document.body.classList.add('light-mode');
    themeIcon.classList.remove('fa-sun');
    themeIcon.classList.add('fa-moon');
}

// Back to Top Button
const backToTop = document.getElementById('backToTop');
window.addEventListener('scroll', () => {
    if (window.pageYOffset > 300) {
        backToTop.classList.add('show');
    } else {
        backToTop.classList.remove('show');
    }
});

backToTop.addEventListener('click', () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
});

// Popup Message
function showPopup() {
    const popup = document.getElementById('popupMessage');
    popup.style.display = 'block';
    setTimeout(() => {
        popup.style.display = 'none';
    }, 5000);
}

// Close modal when clicking outside
window.addEventListener('click', (event) => {
    const modal = document.getElementById('projectModal');
    if (event.target === modal) {
        closeProjectModal();
    }
});

// Search Functionality
const searchInput = document.getElementById('searchInput');
const projectItems = document.querySelectorAll('.project-card');
const projectCategories = document.querySelectorAll('.projects-grid');

searchInput.addEventListener('input', () => {
    const searchTerm = searchInput.value.toLowerCase().trim();
    let hasResults = false;

    projectCategories.forEach(category => {
        let categoryHasResults = false;

        category.querySelectorAll('.project-card').forEach(item => {
            const keywords = item.getAttribute('data-keywords').toLowerCase();
            const title = item.querySelector('h4').textContent.toLowerCase();
            const description = item.querySelector('h6').textContent.toLowerCase();

            if (keywords.includes(searchTerm) || title.includes(searchTerm) || description.includes(searchTerm)) {
                item.style.display = 'block';
                categoryHasResults = true;
            } else {
                item.style.display = 'none';
            }
        });

        // Show/hide "No results" message
        const noResults = category.querySelector('.no-results') || document.createElement('div');
        if (!categoryHasResults && searchTerm !== '') {
            if (!category.querySelector('.no-results')) {
                noResults.className = 'no-results';
                noResults.textContent = 'ูุง ุชูุฌุฏ ูุชุงุฆุฌ ูุทุงุจูุฉ ููุจุญุซ';
                category.appendChild(noResults);
            }
        } else {
            if (category.querySelector('.no-results')) {
                category.removeChild(category.querySelector('.no-results'));
            }
        }

        if (categoryHasResults) hasResults = true;
    });

    // Scroll to first result if there are matches
    if (hasResults && searchTerm !== '') {
        const firstVisibleItem = document.querySelector('.project-card[style="display: block;"]');
        if (firstVisibleItem) {
            firstVisibleItem.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
    }
});

// Bubbles Background Animation
function createBubbles() {
    const bubblesContainer = document.getElementById('bubbles');
    const bubbleCount = 20;

    for (let i = 0; i < bubbleCount; i++) {
        const bubble = document.createElement('div');
        bubble.classList.add('bubble');

        const size = Math.random() * 60 + 20;
        const posX = Math.random() * 100;
        const duration = Math.random() * 20 + 10;
        const delay = Math.random() * 10;

        bubble.style.width = `${size}px`;
        bubble.style.height = `${size}px`;
        bubble.style.left = `${posX}%`;
        bubble.style.setProperty('--duration', `${duration}s`);
        bubble.style.animationDelay = `${delay}s`;

        bubblesContainer.appendChild(bubble);
    }
}

// Initialize
document.addEventListener('DOMContentLoaded', () => {
    updateProgress();
    createBubbles();
});
